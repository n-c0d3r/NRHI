#pragma once

/** @file nrhi/pipeline_state_desc.hpp
*
*   Implement pipeline_state desc.
*/



//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



#pragma region Includes

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////

#include <nrhi/prerequisites.hpp>

////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////

#include <nrhi/pipeline_state_type.hpp>
#include <nrhi/format.hpp>
#include <nrhi/frame_buffer_desc.hpp>
#include <nrhi/cull_mode.hpp>
#include <nrhi/fill_mode.hpp>
#include <nrhi/depth_comparison_func.hpp>
#include <nrhi/primitive_topology.hpp>
#include <nrhi/utilities/platform_object_pool.hpp>

#pragma endregion



namespace nrhi {

	class A_device;
	class A_pipeline_state;
	class A_frame_buffer;
	class A_shader;



	struct F_rasterizer_desc {

		E_cull_mode cull_mode = E_cull_mode::BACK;
		E_fill_mode fill_mode = E_fill_mode::SOLID;

		b8 font_counter_clock_wise = true;

		NRHI_PLATFORM_OBJECT_HASH_MEMBERS_FUNCTION(
			cull_mode,
			fill_mode,
			font_counter_clock_wise
		);

	};

	struct F_depth_stencil_desc {

		b8 enable_depth_test = false;
		E_format format = E_format::D32_FLOAT;
		E_depth_comparison_func depth_comparison_func = E_depth_comparison_func::LESS;
		b8 depth_buffer_write = true;

		NRHI_PLATFORM_OBJECT_HASH_MEMBERS_FUNCTION(
			enable_depth_test,
			format,
			depth_comparison_func,
			depth_buffer_write
		);

	};

	struct F_pipeline_state_desc {

		E_pipeline_state_type type = E_pipeline_state_type::NONE;

		TG_vector<E_format> color_format_vector = {
			E_format::R8G8B8A8_UNORM
		};
		F_depth_stencil_desc depth_stencil_desc;

		F_rasterizer_desc rasterizer_desc;

		E_primitive_topology primitive_topology = E_primitive_topology::NONE;

		TG_vector<TK_valid<A_shader>> shader_p_vector;

	};

	class NRHI_API H_pipeline_state_desc {



	};

}
